# =================================================================
# QEMU ROBOTICS EMULATION MACHINE CONFIGURATION
# =================================================================
# This machine configuration defines a QEMU virtual machine for testing
# and development of robotics applications without physical hardware.
#
# QEMU emulation specifications:
# - ARM64 (AArch64) processor emulation
# - 512MB RAM (configurable)
# - Virtual hardware interfaces for testing
# - Network connectivity for remote development
# - No physical GPIO/I2C/SPI (software simulation only)
#
# Use cases:
# - Software development and testing without hardware
# - CI/CD pipeline testing
# - Algorithm development and validation
# - Multi-platform compatibility testing
# - Training and educational purposes
# - Initial development before hardware availability
#
# Limitations:
# - No real hardware interfaces (GPIO, I2C, SPI)
# - No real-time guarantees (host OS dependent)
# - Limited hardware-specific driver testing
# - No physical sensor integration testing
# =================================================================

#@TYPE: Machine
#@NAME: QEMU Robotics Emulation
#@DESCRIPTION: QEMU ARM64 virtual machine for robotics controller development and testing

# =================================================================
# BASE MACHINE CONFIGURATION
# =================================================================
# Inherit from the standard QEMU ARM64 configuration
# This provides the basic virtual hardware emulation
require conf/machine/qemuarm64.conf

# =================================================================
# ROBOTICS EMULATION FEATURES
# =================================================================
# Add robotics feature for testing robotics applications
# Note: Physical hardware features (gpio, i2c, spi) are not included
# as they cannot be properly emulated without actual hardware
MACHINE_FEATURES += "robotics"

# =================================================================
# HARDWARE FEATURE EXCLUSIONS
# =================================================================
# Remove RTC (Real-Time Clock) from backfill
# Virtual machines don't need battery-backed RTC
MACHINE_FEATURES_BACKFILL_CONSIDERED += "rtc"

# =================================================================
# ESSENTIAL ROBOTICS PACKAGES
# =================================================================
# Install the robotics controller application for testing
# This allows testing of the software stack in emulation
MACHINE_ESSENTIAL_EXTRA_RDEPENDS += "robotics-controller"

# =================================================================
# QEMU EMULATION SETTINGS
# =================================================================
# Set virtual machine memory to 512MB
# This is sufficient for robotics controller testing
# Increase for memory-intensive applications or computer vision testing
# Available options: "256M", "512M", "1G", "2G"
QB_MEM = "512M"

# =================================================================
# DEVELOPMENT NOTES
# =================================================================
# To run this configuration:
# 1. Build: bitbake robotics-image
# 2. Run: runqemu qemu-robotics robotics-image
#
# Networking is enabled by default for:
# - SSH access for remote development
# - Package installation and updates
# - File transfer between host and guest
#
# For hardware interface testing, use physical machines:
# - beaglebone-robotics: For real hardware testing
# - rpi4-robotics: For Raspberry Pi development
# =================================================================
